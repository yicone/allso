"use strict";function getHash(){return location.hash?location.hash.substring(1):""}function saveState(){localStorage.allso_state=JSON.stringify(state)}function set(t,e){state.engines[t]=e,saveState();var s=Object.keys(engines[e])[0],a=engines[e][s];set_url[t]=a[0],set_top[t]=a[2],set_left[t]=a[3],set_foot[t]=a[4],$(".engine-brand img").eq(t).attr("src",a[1]),need_respond=!0}function change_state(t){var e=t?0:1;2==state.side?(state.side=e,set_left[e]=0):state.side=2,respond(),2==state.side&&so()}function respond(){var t=$("body").width(),e=$(window).height(),s=$("nav.navbar").height(),a=t/2;2==state.side?($a.fadeIn("fast").animate({"margin-left":set_left[0],width:a-set_left[0]},"fast"),$b.fadeIn("fast").animate({"margin-left":a+set_left[1],width:a-set_left[1]},"fast"),$progress[0].style.width="50%",$progress[1].style.width="50%"):0==state.side?($a.fadeIn("fast").animate({"margin-left":set_left[0],width:t-set_left[0]},"fast"),$b.fadeOut("fast"),$progress[0].style.width="75%",$progress[1].style.width="25%"):($a.fadeOut("fast"),$b.fadeIn("fast").animate({"margin-left":set_left[1],width:t-set_left[0]},"fast"),$progress[0].style.width="25%",$progress[1].style.width="75%"),$a.animate({"margin-top":set_top[0]+s,height:e-set_top[0]-s+set_foot[0]},"fast"),$b.animate({"margin-top":set_top[1]+s,height:e-set_top[1]-s+set_foot[1]},"fast"),need_respond=!1}function sync(){var keywords=$($soinput[0]).val();if(keywords){var sl,tl;if(1==state.sync_mode)sl="en",tl="zh-CN";else{if(2!=state.sync_mode)return $($soinput[1]).val(keywords),void so(1);sl="zh-CN",tl="en"}var translate_url="http://translate.google.cn/translate_a/single?client=gtx&sl="+sl+"&tl="+tl+"&dt=t&q="+keywords;$.ajax({url:translate_url,dataType:"text",success:function success(data){var obj=eval(data);console.log(obj);var r=obj[0][0][0];console.log(r),$($soinput[1]).val(r),so(1)},error:function(t,e,s){console.error(t,e,s)}})}}function so(t){if(console.log("so",t),""!==$.trim($soinput[0].value)){var e=$soinput[0].value,s=encodeURIComponent(e),a=$soinput[1].value,o=encodeURIComponent(a);2!==state.side&&t!==state.side&&(state.side=2,respond()),2==state.side?void 0===t?($a[0].src=set_url[0]+s,$b[0].src=set_url[1]+o):0===t?$a[0].src=set_url[0]+s:$b[0].src=set_url[1]+o:0==state.side&&(1!==t?$a[0].src=set_url[0]+s:0!==t&&($b[0].src=set_url[1]+o)),window.document.title=e+" - ALLSO"}else location.hash="",window.document.title="ALLSO - 聚合搜索引擎";need_respond&&respond(),$progress.addClass("progress-bar-striped active"),window.setTimeout(function(){$progress.removeClass("progress-bar-striped active")},2e3)}var $soinput=$(".soinput"),$progress=$("div.progress>div"),$a=$("#a"),$b=$("#b"),engines=[{Google:["https://www.google.com/search?q=","https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",-76,-120,87]},{"Ask Google":["https://www.search.ask.com/web?q=","https://www.search.ask.com/assets/b/a-logo-small.png",-60,-120,120]},{"搜狗":["https://www.sogou.com/web?query=","https://img01.sogoucdn.com/app/a/100520122/0c6aeb64_jieguo.png",0,0,127]},{"必应":["https://cn.bing.com/search?setmkt=zh-cn&setlang=zh-cn&q=","https://cn.bing.com/sa/simg/CN_Logo_Gray.png",-72,-80,60]},{"微博":["http://s.weibo.com/weibo/","http://img.t.sinajs.cn/t6/style/images/global_nav/WB_logo.png?id=1404211047727",-180,0,163]},{"360搜索":["https://www.haosou.com/s?q=","https://p.ssl.qhimg.com/t0184e4ce3cb83220c1.png",0,-10,80]},{"百度":["https://www.baidu.com/s?wd=","https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo_top_ca79a146.png",-45,-90,70]},{GitHub:["https://github.com/search?q=","http://www.hack.institute/events/connected-car/img/github-logo-white.png",-130,0,200]},{Instapaper:["https://www.instapaper.com/search?q=","https://qph.ec.quoracdn.net/main-qimg-81323e136c3a148d9d74ac3ed060b4c2",0,0,0]}],need_respond=!0,set_url=[],set_top=[0,0],set_left=[0,0],set_foot=[0,0],$engines=$(".engines"),state={engines:[1,2],autoSO:!0,side:2,sync_mode:0};if(void 0!==localStorage.allso_state){var data=localStorage.allso_state;state=JSON.parse(data)}respond(),$engines.each(function(t){for(var e in engines){var s=engines[e],a=t,o=e,n=Object.keys(s)[0],i='<li><a onclick="set('+a+","+o+");so("+a+');">'+n+"</a></li>";$(this).append(i),"百度"!=n&&"GitHub"!=n||$(this).append('<li role="separator" class="divider"></li>')}}),$($(".sync-mode>a")[state.sync_mode]).addClass("btn-danger");for(var i in state.engines){var engine_index=state.engines[i];set(i,engine_index)}!function(){if(location.hash){var t=getHash();t=decodeURIComponent(t).replace(/\+/g," "),$soinput.val(t),so()}}(),$(window).resize(function(){respond()}),$($soinput[0]).on("input",function(){var t=$(this).val();$($soinput[1]).val(t)}),$soinput.each(function(t){$(this).on("input",function(){state.autoSO&&(console.log("input event",t),0==t?so():so(t))}),$(this).bind("enterKey",function(e){var s=$(this).val();location.hash=s,0==t&&sync()}),$(this).keyup(function(t){13==t.keyCode&&$(this).trigger("enterKey")})}),$(".sync-mode>a").each(function(t){$(this).click({index:t},function(e){$(".sync-mode>a").removeClass("btn-danger"),$(this).addClass("btn-danger"),state.sync_mode=t,saveState(),sync()})}),$("div.loading").fadeOut("fast");
//# sourceMappingURL=js.js.map
